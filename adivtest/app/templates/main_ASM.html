{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="{% static 'css/bootstrap.min.css'' %}" />
  <script src="{% static 'js/bootstrap.min.js' %}"></script>  
  <link rel="stylesheet" href="{% static 'create_user.css' %}" /> 
  <link rel="stylesheet" href="{% static 'styles.css' %}" />
  <title>Main Page</title>
</head>

<style> 

  #tab_text{ 
    font-weight: 700;
    font-size: 24px; 
  } 
  #logoutbtn{ 
    margin-left: 16px; 
    padding-top: 12px;
    font-size: 14px;
  } 
  
  </style>

<body> 
  <a href="{% url 'logout' %}"
      ><button type="submit" id="logoutbtn">
        <p>Logout</p>
      </button>
    </a>    

    <br>
    <div id="user_details">Connect as: {{full_name}}</div>
    
    <div class="imgcontainer">
      <img src="{% static 'SCE_logo.png' %}" alt="Avatar" class="avatar" />
    </div>
    
    {% if msg %}
    <div class="alert">
      <span class="alertCloseBtn" onclick="this.parentElement.style.display='none';">&times;</span> 
      <h3>{{msg}}</h3>
    </div>
      {% endif %}

    <div class="container">
      <a href = "{% url 'inventory_stock_ASM' %}">
      <div class="tab"><h2 id="tab_text">Inventory Stock</h2></div></a>
      <div class="tab"><h2 id="tab_text">Submit An Order</h2></div>
      <div class="tab"><h2 id="tab_text">Publish Requierments</h2></div>
      <div class="tab" type="button" data-bs-toggle="modal" data-bs-target="#manageStudents"><h2 id="tab_text">Manage Students</h2></div></button>
    </div>
    <div id="banner"><h3>ADYSH</h3></div> 

<!--Student Management Modal -->
<div class="modal fade" id="manageStudents" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="manageStudentsLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="manageStudentsLabel">Student Management</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <!--Create User Button-->
        <div class="btn btn-primary btn-lg" type="button" data-bs-toggle="modal" data-bs-target="#CreateUser"><h3 class="fs-2">Create Student</h3></div>
        <!--Remove User Button-->
        <div class="btn btn-primary btn-lg" type="button" data-bs-toggle="modal" data-bs-target="#RemoveUser"><h3 class="fs-2">Remove Student</h3></div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
<!--Student Management Modal -->

<!--Create Student Modal-->
<div class="modal fade" id="CreateUser" aria-hidden="true" aria-labelledby="exampleModalToggleLabel" tabindex="-1" data-bs-backdrop="static">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="createUserLabel">Create new user:</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <form id="create_form" class ="create_form" action="{% url 'create_user' %}" method="POST" onsubmit="submitBtn.disabled=true; submitBtn.value='Creating Student...'">
        {% csrf_token %}
        <div class="modal-body">

          <!--First name text input-->
          <label for="fname">First name:</label>
          <input class="text-input" type="text" id="fname" name="fname" required><br>

          <!--Last name text input-->
          <label for="lname">Last name:</label>
          <input class="text-input" type="text" id="lname" name="lname" required><br>

          <!--ID text input--> 
          <label for="id">ID:</label>
          <input class="text-input" type="text" onkeypress="return (event.charCode !=8 && event.charCode ==0 || (event.charCode >= 48 && event.charCode <= 57))" id="id" name="id" minlength="9" maxlength="9" required><br>

          <!--Email text input-->
          <label for="email">Email:</label>
          <input class="text-input" type="email" id="email" name="email" required><br>

          <!--Password text input-->
          <label for="password">Password:</label>
          <input class="text-input" type="text" id="password" name="password" minlength="6" required><br>

          <!--Role select option input-->
          <label hidden>User role:</label>
          <select style="width:100%;" id="role" name="role" hidden>
            <option selected value="1">Student</option>
          </select>

          <label>Student Courses:</label><br>
          <div class="course_select">
          <!--Selecting Courses for Student-->
          {% for x in courses %}
          {% if x is None %}
          {%else%}
          <input class="course_checkbox" type="checkbox" id="courses[]" name="courses" value="{{x}}"></input>
          <label class="course_label">{{x}}</label>
          <br>
          {%endif%}
          {% endfor %}
          </div><br>

          <!--Submit to create new user-->
          <input type="submit" name="submitBtn" value="Create Student" class="submit_button"/>

        </div>
      </form>
    </div>
  </div>
</div>
<!--Create Student Modal-->
  
<!--Remove User modal-->
<div class="modal fade" id="RemoveUser" aria-hidden="true" aria-labelledby="exampleModalToggleLabel" tabindex="-1" data-bs-backdrop="static">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="removeUserLabel">Remove user</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <form class ="create_form" action="{% url 'delete_user' %}" method="POST" onsubmit="removeBtn.disabled=true; removeBtn.value='Removing User...'">
        {% csrf_token %}
        <div class="modal-body">
          <div><h3>Email of user:</h3></div>
          <input class="text-input" type="email" id="email" name="email" required><br>
          <input type="checkbox" id="staff" name="staff" value="staff" checked hidden></option>

          <input id="removeBtn" type="submit" class="submit_button" value="Remove User" onclick="return confirm('Are you sure you want to remove this user?')"></input>
        </div>
      </form>
    </div>
  </div>
</div>
</body>
</html> 

